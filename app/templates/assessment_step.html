{% extends "base.html" %}
{% block content %}
  <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
    <h1 class="text-3xl font-bold leading-tight">{{ t('assessment_title') }}</h1>
    <div class="pill">{{ t('assessment_step') }} {{ step }} / {{ total }}</div>
  </div>

  <form class="mt-6 surface p-6 max-w-2xl" method="post">
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}" />
    <div class="text-base font-semibold">{{ label }}</div>

    {% if q.kind == 'choice' %}
      <select name="value" class="mt-3 w-full border border-slate-300 rounded-xl px-3 py-2.5 bg-white">
        {% for c in q.choices %}
          <option value="{{c}}" {% if existing==c %}selected{% endif %}>{{ t('choice_' ~ c) }}</option>
        {% endfor %}
      </select>
    {% else %}
      <input name="value" value="{{ existing }}" class="mt-3 w-full border border-slate-300 rounded-xl px-3 py-2.5 bg-white" />
    {% endif %}

    {% if error %}<div class="mt-2 text-sm text-red-600">{{ error }}</div>{% endif %}

    <div class="mt-6 flex flex-col gap-3 sm:flex-row sm:justify-between">
      {% if step > 1 %}
        <a class="btn-ghost px-4 py-2 text-center" href="/assessment/{{ assessment.id }}/{{ step-1 }}">{{ t('assessment_back') }}</a>
      {% else %}
        <span></span>
      {% endif %}
      <button class="btn-primary px-4 py-2" type="submit">{{ t('assessment_next') }}</button>
    </div>
  </form>
{% endblock %}
